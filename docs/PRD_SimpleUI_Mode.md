# 简洁版/标准版双模式前端 PRD

## 版本信息
- 文档日期：2026-02-02
- 适用范围：前端 UI 方案（不涉及后端改造）

## 背景与目标
- 现状：标准版以表格为主，满足“任务表格化”要求，但移动端体验不友好。
- 目标：在保持标准版不变的前提下，新增“简洁版”展示模式，移动端优先；桌面端可切换用于调试。

## 核心原则
1. 功能一致：简洁版与标准版功能、字段、权限保持一致，仅改变呈现方式。
2. 移动优先：卡片/列表优先，表格仅在需要对账/对比场景使用。
3. 低侵入切换：仅开发测试账号可见切换入口，避免干扰正式用户。
4. 可扩展：未来可向更多角色开放或作为正式模式切换。

## 入口与切换
- 入口位置：顶部导航左侧显示两个按钮。
- 模式名称：标准版 / 简洁版（按钮文字直接显示）。
- 可见角色：仅 dev_test 可见。

## 全局切换框架（简洁版/标准版）
- 共存方式：同页面内条件渲染，功能/字段/权限一致，仅展示方式切换，路由与权限逻辑不变。
- 入口位置：顶部左侧两个按钮，文本直接显示“标准版 / 简洁版”。
- 可见角色：仅 dev_test 可见切换入口，其他角色不可见简洁版。
- 默认模式：标准版。
- 模式持久化：localStorage（前端纯实现）。
- 组件规范：统一全局组件（简洁版卡片/状态图例等），各页面复用。

## 交互与样式原则
- 卡片为主：列表使用信息卡片展示核心字段。
- 表格为辅：在详情或“需要对账/对比”场景提供“切换表格”。
- 状态用颜色：卡片边框/角标颜色表示状态，页面顶部提供颜色图例。
- 图片展示：缩略图最多 3 张，超过以“+N”入口展示。
- 折叠标识：全局统一使用 Chevron（向下/向上）。

## 页面方案（已定稿）

### 1) 排班管理（简洁版）
**视图切换：场站视图 / 人员视图**

**筛选区（简洁版）**
- 默认收起：单行“当前筛选摘要” + 右侧“筛选”按钮。
- 展开方式：点击“筛选”展开筛选项，选项变更即触发过滤；保存后自动收起。
- 筛选项：保留与标准版一致（仅收起以节省空间）。

**场站视图**
- 场站卡片：显示场站名称、当月已排/未排统计。
- 展开后显示岗位卡片：已排班=绿色，未排班=灰色。
- 点击岗位卡片：打开岗位月历（周一到周日排列）。
  - 单元格显示人员姓名，最多 3 个，超出显示“+N”。
  - 点击日期：展示当天详情（卡片列表：人员）。

**人员视图**
- 人员卡片：姓名 + 岗位/场站 + 本月班次数。
- 点击人员卡片：打开个人月历（周一到周日排列）。

**切换表格**
- 页面右上角提供“切换表格”按钮，用于对账/对比场景。

**待确认**
- 异常标识规则（缺岗/未排/冲突等）暂未确定。

**框线草图**
```text
┌───────────────────────────────────────────────┐
│ 排班管理                               [切换表格] [筛选] │
│ 当前筛选摘要：场站=… | 人员=… | 月份=…                     │
└───────────────────────────────────────────────┘
│ 场站视图：场站卡 -> 展开岗位卡 -> 点岗位看月历 -> 点日期看详情 │
│ 人员视图：人员卡 -> 点开月历 -> 点日期看详情                 │
```

### 2) 故障上报/维修（简洁版）
**列表卡片字段**
- 场站 / 设备编号 / 设备名称 / 安装地点 / 上报人 / 紧急程度。

**状态表现**
- 不显示状态文字，仅用颜色角标表示；页面顶部提供状态颜色图例（统一全局组件）。

**详情弹窗**
- 顶部显示“流转记录”（时间线）。
- Tab 切换：上报信息 / 派单信息 / 维修信息 / 验收信息。

**切换表格**
- 页面右上角提供“切换表格”按钮。

**框线草图**
```text
┌───────────────────────────────────────────────┐
│ 故障上报/维修                          [切换表格] [筛选] │
│ 图例：颜色=状态（无状态文字）                               │
└───────────────────────────────────────────────┘
┌───────────────────────────────────────────────┐
│ ■ 设备名称/编号/场站/安装地点/上报人/紧急程度         状态角标 │
│ [查看详情]                                                    │
└───────────────────────────────────────────────┘
```

### 3) 临时任务（简洁版）
包含 3 个子页面：填报 / 完成情况记录 / 临时工作任务汇总表。

#### 3.1 临时任务填报（/temporary-tasks/fill）
**卡片字段（折叠态）**
- 任务名称 / 执行人 / 单位积分 / 数量。

**展开后**
- 完成情况（完成/未完成）、备注、审核状态等。

**可编辑规则（对齐现状）**
- 仅“填报模式 + 可提交”时可编辑。
- 单位积分：是否可编辑取决于任务设置（例如 unitPointsEditable=1）。
- 数量、完成情况、备注：在可提交时可编辑。

**操作**
- 提交按钮保留。

**框线草图**
```text
┌───────────────────────────────────────────────┐
│ 临时任务填报                          [切换表格] [筛选] │
└───────────────────────────────────────────────┘
┌───────────────────────────────────────────────┐
│ ■ 任务名称                           状态角标   ▾           │
│ 执行人：xxx  单位积分：[10]  数量：[2]                         │
│（展开）完成情况/备注/更多字段…   [提交]                        │
└───────────────────────────────────────────────┘
```

#### 3.2 临时任务完成情况记录（/temporary-tasks/history）
**列表排序**
- 待审核置顶，其余按提交时间倒序。

**卡片折叠/展开**
- 默认折叠（Chevron）。
- 折叠态仅显示：任务名称 / 执行人 / 单位积分 / 数量。
- 展开后显示：完成情况、提交时间、备注、审核信息、扣分信息（仅驳回显示）。

**操作**
- “审核”按钮保留，点击后弹出审核弹窗（通过/驳回 + 扣分信息）。

**分页**
- 每页 5 条。

**框线草图**
```text
┌───────────────────────────────────────────────┐
│ 临时任务完成情况记录                  [切换表格] [筛选] │
│ 待审核置顶 | 每页5条                                       │
└───────────────────────────────────────────────┘
┌───────────────────────────────────────────────┐
│ ■ 任务名称                           审核状态角标  ▾         │
│ 执行人：xxx  单位积分：10  数量：2                            │
│（展开）完成情况/提交时间/审核人/扣分…   [审核]                │
└───────────────────────────────────────────────┘
```

#### 3.3 临时工作任务汇总表（/temporary-tasks/library）
**筛选区**
- 折叠筛选条（默认收起：摘要 + 筛选按钮），展开后保留与标准版一致筛选项。

**操作区**
- 单行操作按钮：批量删除 / 新增任务 / 批量导入 / 下载模板。

**列表呈现**
- 卡片为主，表格为辅（右上角“切换表格”）。
- 卡片默认折叠（Chevron）：折叠态仅显示任务名称 / 单位积分 / 数量。
- 批量选择：卡片左侧提供勾选（用于批量删除）。
- 展开态显示其余字段（任务类别/给分方式/场站/内容/规则/可修改/强制审核等）。

**框线草图**
```text
┌───────────────────────────────────────────────┐
│ 临时工作任务汇总表                     [切换表格] [筛选] │
└───────────────────────────────────────────────┘
┌───────────────────────────────────────────────┐
│ [批量删除] [新增任务] [批量导入] [下载模板]                │
└───────────────────────────────────────────────┘
┌───────────────────────────────────────────────┐
│ [ ] ■ 任务名称                                  ▾            │
│     单位积分：10   数量：2                                   │
│（展开）更多字段…                         [分配/编辑/删除]     │
└───────────────────────────────────────────────┘
```

### 4) 岗位工作（简洁版）
包含 3 个子页面：固定任务填报 / 岗位工作任务汇总表 / 岗位工作完成情况记录。

#### 4.1 固定任务填报（/position-work/field）
**列表排序**
- 未提交置顶。

**卡片折叠/展开**
- 默认折叠（Chevron）。
- 折叠态显示：任务名称 / 单位积分 / 数量。
- 展开后显示：场站/岗位/任务类别/给分方式/任务来源/审核状态/完成情况/备注。

**操作**
- 提交按钮保留。

#### 4.2 岗位工作任务汇总表（/position-work/management）
- 规则对标“临时工作任务汇总表”，字段以岗位工作现状为准。
- 简洁版不保留“申请填报”入口。

#### 4.3 岗位工作完成情况记录（/position-work/records）
- 规则对标“临时任务完成情况记录”（待审核置顶、折叠卡、审核弹窗、每页5条）。

**框线草图（总览）**
```text
固定任务填报：未提交置顶 + 折叠卡（任务/积分/数量）+ 展开填完成情况/备注 + 提交
任务汇总表：卡片+勾选+单行操作区+派发/编辑/删除
完成情况记录：待审核置顶 + 折叠卡（任务/执行人/积分/数量）+ 展开详情 + 审核弹窗
```

### 5) 安全自检 / 安全他检（简洁版）
**填写明细交互（对齐现状，仅调整呈现）**
- 表单结构：同页两张大卡（填报/记录查询），点击大卡展开内容区；提交成功后自动折叠回摘要态。
- 操作按钮布局：同一行，重置/退出在左侧，提交在右侧。

**安全自检：检查项目行样式**
- 每条检查项目一行：左侧两行文字（检查项目 + 检查标准），右侧“是/否”二选一。
- “是/否”控件为“格子内有字”的按钮样式（非圆点 radio）。
- 默认值：进入展开后默认选“是”。
- 选择“否”时：显示异常备注与照片上传区（字段与校验对齐现状）。

**安全他检：检查项目行样式**
- 每条检查项目一行：左侧两行文字（检查项目 + 检查标准），右侧“合格/不合格”二选一。
- “合格/不合格”控件为“格子内有字”的按钮样式（非圆点 radio）。
- 默认值：进入展开后默认选“合格”。
- 选择“不合格”时：显示不合格原因与照片上传区（字段与校验对齐现状）。

**框线草图（安全检查项目行）**
```text
┌───────────────────────────────────────────────┐
│ 检查项目名称（父项/子项）                 [ 是 ][ 否 ] │
│ 标准：xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx          │
│（若选“否”）异常备注 + 照片上传…                           │
└───────────────────────────────────────────────┘

┌───────────────────────────────────────────────┐
│ 检查项目名称（父项/子项）           [ 合格 ][ 不合格 ] │
│ 标准：xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx          │
│（若选“不合格”）不合格原因 + 照片上传…                   │
└───────────────────────────────────────────────┘
```
目标：同一页面上下两张大卡片，减少“页面切换”，移动端优先。

#### 5.1 安全自检（两大卡布局）
**大卡1：自检填报**
- 摘要：今日日期；已完成哪些工作性质；未完成时提示“请尽快完成…”，无需完成则提示“今日无待完成项”。
- 点击展开：勾选工作性质 + 显示检查项目（对齐现状 SafetyCheckItemList）。
- 提交后：卡片自动折叠回摘要态。
- 按钮布局：重置/退出在左侧，提交在右侧，三者同一行。

**大卡2：自检记录**
- 摘要：日期范围默认“本周（周一-周日）”；合格x/不合格y；最后提交时间。
- 展开后：记录以“小卡片列表”嵌在大卡内。
- 常用筛选常显：日期范围（默认本周，可自定义）/ 工作性质。
- 不常用筛选隐藏：检查结果、排序等。
- 每页 5 条。
- 右下角退出按钮：点击折叠该大卡。

#### 5.2 安全他检（两大卡布局）
**大卡1：新增他检**
- 摘要文案：用于对员工进行安全检查：发现问题及时记录并提交。
- 展开后字段对齐现状：场站 / 被检查人 / 工作性质 / 检查项目（SafetyCheckItemList：合格/不合格）/ 备注。
- 提交后：卡片自动折叠回摘要态。
- 按钮布局：重置/退出在左侧，提交在右侧，三者同一行。

**大卡2：检查记录查询**
- 摘要文案：用于查看员工安全检查记录（包含自检与他检）。
- 记录列表对齐现状：检查性质（自检/他检）在同一查询结果内出现。
- 常用筛选常显：被检查人 / 日期范围（默认本周，可自定义）/ 工作性质。
- 不常用筛选隐藏：检查性质、场站、检查结果、排序等。
- 每页 5 条。
- 右下角退出按钮：点击折叠该大卡。

**框线草图**
```text
┌ 安全自检 ┐
[自检填报大卡 ▾]  摘要：今日/完成情况… -> 展开后：工作性质+检查项目  [重置][退出]      [提交]
[自检记录大卡 ▾]  摘要：本周范围/合格x不合格y/最后提交… -> 展开后：筛选+内嵌小卡列表+分页  [退出]

┌ 安全他检 ┐
[新增他检大卡 ▾]  摘要：功能介绍… -> 展开后：场站/被检查人/工作性质/检查项目  [重置][退出]      [提交]
[记录查询大卡 ▾]  摘要：包含自检+他检… -> 展开后：常用筛选常显+内嵌小卡列表+每页5条+分页  [退出]
```

### 6) 卫生自检 / 卫生他检（简洁版）
**填写明细交互（对齐现状，仅调整呈现）**
- 责任区分组：一行责任区标题；下方为点位列表。
- 点位行样式：左侧两行文字（点位/子项 + 要求/标准），右侧“合格/不合格”二选一。
- “合格/不合格”控件为“格子内有字”的按钮样式（非圆点 radio）。
- 默认值：进入展开后默认选“合格”。
- 选择“不合格”时：显示不合格说明与照片区（字段与校验对齐现状）。

**框线草图（卫生点位行）**
```text
┌───────────────────────────────────────────────┐
│ 责任区：xxxx（分组标题）                                │
├───────────────────────────────────────────────┤
│ 点位：xxxx                             [ 合格 ][ 不合格 ] │
│ 要求：xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx           │
│（若选“不合格”）点位照片…                               │
└───────────────────────────────────────────────┘
```
布局与交互完全对标“安全自检/他检”，仅表单字段与记录字段对齐卫生现状。

#### 6.1 卫生自检（两大卡布局）
**大卡1：自检填报**
- 摘要：今日日期；今日是否已完成（含完成时间）；未完成时提示尽快完成。
- 展开后对齐现状：责任区/点位检查（HygieneAreaChecklist），包含点位结果（合格/不合格）、点位照片、责任区照片、说明等；已完成时展开展示当日提交内容（只读）。
- 提交后自动折叠。
- 按钮布局：重置/退出在左侧，提交在右侧。

**大卡2：自检记录**
- 日期范围默认“本周（周一-周日）”，可自定义。
- 常用筛选：日期范围 / 责任区。
- 不常用筛选隐藏：结果、排序等。
- 内嵌小卡列表 + 每页 5 条 + 退出折叠按钮。

#### 6.2 卫生他检（两大卡布局）
**大卡1：新增他检**
- 摘要文案：用于对员工进行卫生检查：发现问题及时记录并提交。（可与安全他检保持同款文案风格）
- 展开后对齐现状：场站 / 责任区 / 被检查人 / 检查项目（SafetyCheckItemList：合格/不合格，点位/子项）/ 备注。
- 提交后自动折叠。
- 按钮布局：重置/退出在左侧，提交在右侧。

**大卡2：检查记录查询**
- 记录列表包含自检与他检（对标现状 inspectionKind）。
- 常用筛选：被检查人 / 日期范围（默认本周，可自定义）/ 责任区。
- 不常用筛选隐藏：检查性质、场站、结果、排序等。
- 每页 5 条 + 退出折叠按钮。

## 待确认 / 待补充
- 设备保养（自检/记录/分配）等页面按相同方式逐页确认并补充。
- 简洁版统一组件库的详细规范（卡片、角标、图例、折叠标识、内嵌小卡）需整理成单独规范。